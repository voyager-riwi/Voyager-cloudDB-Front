- name: Simple Deploy
  uses: appleboy/ssh-action@v1.1.0
  with:
    host: ${{ secrets.SERVER_HOST }}
    username: ${{ secrets.SERVER_USER }}
    key: ${{ secrets.SSH_PRIVATE_KEY }}
    script: |
      set -e
      cd /root/app

      # Clonar directamente desde GitHub
      echo "ðŸ“¥ Clonando repositorio..."
      rm -rf Voyager-cloudDB-Front
      git clone https://github.com/tu-usuario/Voyager-cloudDB-Front.git
      cd Voyager-cloudDB-Front

      echo "ðŸ”¨ Instalando y construyendo..."
      npm ci
      cat > .env << EOF
      VITE_API_BASE_URL=${{ secrets.VITE_API_BASE_URL }}
      VITE_APP_NAME=${{ secrets.VITE_APP_NAME }}
      VITE_APP_VERSION=${{ secrets.VITE_APP_VERSION }}
      VITE_API_TIMEOUT=${{ secrets.VITE_API_TIMEOUT }}
      VITE_DEBUG=${{ secrets.VITE_DEBUG }}
      EOF
      npm run build

      echo "ðŸ³ Construyendo Docker..."
      docker build -t vue-frontend .

      echo "ðŸŽ¯ Iniciando contenedor..."
      docker stop frontend || true
      docker rm frontend || true
      docker run -d -p 80:80 --name frontend vue-frontend

      echo "âœ… Â¡Listo!"
